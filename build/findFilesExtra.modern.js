import t from"fs-extra";import e from"path";import o from"glob-promise";const n=async n=>{let{root:i,filePattern:a="**/*.*",ignoreFilePattern:r=["**/bin/**","**/node_modules/**","**/obj/**"],fileContentPattern:s,loadFileContent:l=!1,parseJson:f=!1,dot:d=!0,nocase:m=!0}=n;if(!l&&f)throw new Error("findFileExtra: parseJson is only available when loadFileContent is true");let p=await o(a,{ignore:r,cwd:i,nocase:m,dot:d});const c=[];for(const o of p){const n=e.join(i,o),a=e.basename(n),r=e.dirname(n),d=e.dirname(o),m=e.extname(n);let p,u;if((s||l)&&(p=await t.readFile(n,"utf8"),s)){if(s instanceof RegExp&&!s.test(p))continue;if("string"==typeof s&&-1===p.indexOf(s))continue}l||(p=void 0),p&&f&&".json"===m&&(u=JSON.parse(p)),c.push({fullPath:n,pathFromRoot:o,dirPathFromRoot:d,fileName:a,dirFullPath:r,ext:m,json:u,content:l?p:void 0})}return c};export{n as default};
//# sourceMappingURL=findFilesExtra.modern.js.map
